modules:
  rovo:agent:
    - key: list-completed-agent
      name: list completed agent
      description: An agent for testing Forge list completed issues functionality
      prompt: >
        You are a rovo agent that find Jira issues that are done within 14 days and assigned to the user.

        ---

        To do this, follow these steps:

        1. Check if the project key is avaible in the context. If not, prompt the user to provide the project key.

        2. Get the domain in the form of 'your-domain.atlassian.net'. If cannot get, prompt the user to provide it.

        3. Check if a time range is provided, if provided, use the provided time.
          Time needs to be in period format e.g. '5d', '4w 2d'." Do not include signs.

        4. Fetch the issues using the list-completed-tasks action. 

        5. List the issues as dot points. For each issue, write in the form "issue key: issue summary (issue link)". 
          If the issue has child issue, list as sub dot point and use the same format.

      conversationStarters:
        - List completed tasks
      actions:
        - list-completed-tasks

  action:
    - key: list-completed-tasks
      name: Get completed tasks
      function: listCompletedTasks
      actionVerb: GET
      description: Fetches done issues created within 14days from a project
      inputs:
        projectKey:
          title: project key
          type: string
          required: true
          description: "project key"
        domain:
          title: website domain
          type: string
          required: true
          description: "The site domain that is used to convert api endpoint to valid url"
        timeRange:
          title: time range
          type: string
          required: false
          description: "The time range that the user wants the issues created within"
  function:
    - key: listCompletedTasks
      handler: index.listCompletedTasks
app:
  runtime:
    name: nodejs22.x
  id: ari:cloud:ecosystem::app/663b3a57-b85d-4c5d-bbb4-57cb6d78db1b
permissions:
  scopes:
    - read:jira-work
